{
  "version": 3,
  "sources": ["browser-route-module:/sandbox/app/routes/index.tsx?browser", "../../../app/routes/index.tsx"],
  "sourcesContent": ["export { default } from \"/sandbox/app/routes/index.tsx\";", "import { useEffect, useState } from 'react'\nimport { LoaderFunction, json, useLoaderData, useFetcher, Link } from 'remix'\n\ninterface Article {\n  slug: string\n}\n\nfunction range(start: number, end: number) {\n  return Array.from({ length: end - start + 1 }, (_, i) => i)\n}\n\nasync function getArticles({ count, skip }: { count: number; skip: number }) {\n  return range(skip, skip + count).map((_, index) => ({\n    slug: `article-${index}`,\n  }))\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n  const url = new URL(request.url)\n  const param = url.searchParams.get('skip')\n\n  const skip = param === null ? 0 : parseInt(param, 10)\n\n  const articles = await getArticles({ count: 9, skip })\n  const tags = await getTags()\n  const { title, subTitle } = getSiteData()\n\n  const total = await getArticlesCount()\n\n  return json({ articles, title, subTitle, tags, total })\n}\n\nexport default function ArticlesPage() {\n  const { articles: loaderArticles, tags, total } = useLoaderData()\n\n  const fetcher = useFetcher()\n\n  const [articles, setArticles] = useState(loaderArticles)\n\n  useEffect(() => {\n    if (fetcher.data && fetcher.data.articles) {\n      setArticles([...articles, ...fetcher.data.articles])\n    }\n  }, [fetcher.data])\n\n  console.dir([articles.length, total])\n\n  return (\n    <div className=\"grid grid-cols-layout\">\n      <div className=\"col-start-2\">\n        <h1 className=\"text-3xl\">Articles</h1>\n      </div>\n      <div className=\"col-start-2\">\n        <div className=\"grid grid-cols-6 gap-2 my-4\">\n          {tags.map((tag) => {\n            return (\n              <Link key={tag.slug} to={`/articles/${tag.slug}`}>\n                {tag.name} ({tag.articles.length})\n              </Link>\n            )\n          })}\n        </div>\n        <div className=\"grid grid-cols-3 col-start-2 col-span-3 gap-4\">\n          {articles.map((article: any) => {\n            return <p key={article.slug}>{article.slug}</p>\n          })}\n          {articles.length < total ? (\n            <div className=\"col-span-3\">\n              <button\n                onClick={() => {\n                  fetcher.load(`/articles?skip=${articles.length}`)\n                }}\n                className=\"w-full\"\n              >\n                More...\n              </button>\n            </div>\n          ) : (\n            ''\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],
  "mappings": ";;;;;;;;;;;AAAA;;;ACAA;AAAA,mBAAoC;AAgCrB,wBAAwB;AACrC,QAAM,EAAE,UAAU,gBAAgB,MAAM,UAAU;AAElD,QAAM,UAAU;AAEhB,QAAM,CAAC,UAAU,eAAe,2BAAS;AAEzC,8BAAU,MAAM;AACd,QAAI,QAAQ,QAAQ,QAAQ,KAAK,UAAU;AACzC,kBAAY,CAAC,GAAG,UAAU,GAAG,QAAQ,KAAK;AAAA;AAAA,KAE3C,CAAC,QAAQ;AAEZ,UAAQ,IAAI,CAAC,SAAS,QAAQ;AAE9B,SACE,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,MAAD;AAAA,IAAI,WAAU;AAAA,KAAW,cAE3B,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACZ,KAAK,IAAI,CAAC,QAAQ;AACjB,WACE,oCAAC,MAAD;AAAA,MAAM,KAAK,IAAI;AAAA,MAAM,IAAI,aAAa,IAAI;AAAA,OACvC,IAAI,MAAK,MAAG,IAAI,SAAS,QAAO;AAAA,OAKzC,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACZ,SAAS,IAAI,CAAC,YAAiB;AAC9B,WAAO,oCAAC,KAAD;AAAA,MAAG,KAAK,QAAQ;AAAA,OAAO,QAAQ;AAAA,MAEvC,SAAS,SAAS,QACjB,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,UAAD;AAAA,IACE,SAAS,MAAM;AACb,cAAQ,KAAK,kBAAkB,SAAS;AAAA;AAAA,IAE1C,WAAU;AAAA,KACX,cAKH;AAAA;",
  "names": []
}
